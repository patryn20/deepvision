<h1>Lovely Rethink</h1>

<div class="row">
  <div class="col-md-12">
  <div  id="widget-container">
    <% @last_longterms.each do |longterm| %>
      <div class="widget col-md-4">
        <div class="content">
        <p><%= longterm[:hosts]["name"].nil? ? longterm[:hosts]["id"] : longterm[:hosts]["name"] %></p>
        <% if longterm[:longterm].nil? %>
          <p>Waiting for data from the host.</p>
        <!-- Add catch for host data over five minutes and display waiting for data message -->
        <% else %>
          <!-- Add catch for cpu usage null and display collecting data message -->
          <div class="host-cpu" data-easypie-val="<%= number_with_precision longterm[:longterm]["CPU.total.usage"], precision: 2 %>" data-easypie-max="100">
            <span class="stat-value">
              <%= number_to_percentage longterm[:longterm]["CPU.total.usage"], precision: 2 %>
            </span>
            <span class="stat-label">
              CPU
            </span>
          </div>
          <div class="host-memory" data-easypie-val="<%= number_with_precision Longterm.calculate_memory_usage(longterm[:longterm]), precision:2 %>" data-easypie-max="100">
            <span class="stat-value">
              <%= number_to_percentage Longterm.calculate_memory_usage(longterm[:longterm]), precision:2 %>
            </span>
            <span class="stat-label">
              Memory
            </span>
          </div>
          <div class="host-swap" data-easypie-val="<%= number_with_precision Longterm.calculate_swap_usage(longterm[:longterm]), precision:2 %>" data-easypie-max="100">
            <span class="stat-value">
              <%= number_to_percentage Longterm.calculate_swap_usage(longterm[:longterm]), precision:2 %>
            </span>
            <span class="stat-label">
              Swap
            </span>
          </div>
          <div class="host-load" data-easypie-val="<%= number_with_precision longterm[:longterm]["Load"], precision:2 %>" data-easypie-max="<%= number_with_precision Longterm.calculate_max_load(longterm[:longterm]), precision:2 %>">
            <span class="stat-value">
              <%= number_with_precision longterm[:longterm]["Load"], precision:2 %>
            </span>
            <span class="stat-label">
              Load
            </span>
          </div>
          <!-- Add catch for network usage null and display collecting data message -->
          <div class="host-network" data-easypie-val="<%= longterm[:longterm]["Network.Interface.total.Bps"] %>" data-easypie-max="<%= Longterm.get_highest_network_usage_in_range(longterm[:longterm]) %>">
            <span class="stat-value">
              <%= (longterm[:longterm]["Network.Interface.total.Bps"] / 1024).round 1 %> KBps
            </span>
            <span class="stat-label">
              Network
            </span>
          </div>
        <% end %>
        </div>
      </div>
    <% end %>
  </div>
  </div>
</div>